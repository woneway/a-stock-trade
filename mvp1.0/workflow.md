# 游资交易闭环工作流设计

> 基于对游资每日行为的调研，整合复盘→选股→计划→执行→记录全流程

---

## 一、复盘（每日15:30盘后）

### 复盘什么内容？

| 复盘维度 | 具体内容 | 输出 |
|----------|----------|------|
| **涨停板复盘** | 当日所有涨停股，按板块分类 | 涨停股列表、热门板块 |
| **炸板股分析** | 炸板股名单、炸板原因 | 风险警示池 |
| **昨日涨停表现** | 昨日涨停股今日涨幅、溢价率 | 情绪指标 |
| **板块热度** | 哪些板块在动、持续性如何 | 方向判断 |
| **情绪周期判断** | 冰点/回暖/高潮/分歧 | 仓位参考 |
| **龙虎榜/资金流向** | 大资金动向 | 参考 |

### 复盘后得到什么？

1. **明日策略**：当前处于什么情绪周期，应该重仓/轻仓/空仓
2. **目标股池**：从涨停板中筛选出的潜在目标股
3. **风险警示**：需要规避的股票/板块

### 复盘后要改什么？

- 调整**情绪周期参数**（如冰点阈值）
- 更新**板块权重**（哪个板块多看、哪个少看）
- 修改**选股条件**（如换手率、量能要求）

### 改完之后影响是什么？

- 影响次日**交易计划的选股范围**
- 影响**仓位建议**（冰点低仓位，高潮高仓位）

---

## 二、制定交易计划

### 交易计划由什么组成？

每只计划买入的股票，需要制定以下要素：

| 要素 | 说明 | 示例 |
|------|------|------|
| **目标股** | 股票代码+名称 | 600519 贵州茅台 |
| **模式** | 低吸/半路/打板 | 低吸 |
| **买入价** | 计划买入价格 | 1680 |
| **仓位** | 占比总资金 | 10% |
| **止损价** | 止损价格 | 1562 (-7%) |
| **止盈1** | 第一止盈位 | 1764 (+5%) |
| **止盈2** | 第二止盈位 | 1848 (+10%) |
| **验证条件** | 买入前需满足的条件 | 高开<3% AND 量>1.5亿 |
| **时段** | 允许买入的时间段 | 仅早盘(10:40前) |
| **理由** | 买入逻辑 | 龙头回调企稳 |

### 计划状态流转

```
[新建] → [待执行] → [已执行]/[放弃]/[过期]
              ↓
         [部分执行] (如:计划买3只只买1只)
```

---

## 三、盘中执行

### 执行流程

```
监控触发 → 推送提醒 → 人工确认 → 手动执行 → 回填成交
     ↓
  价格到价? 验证条件满足? 时段内?
     ↓
  发送通知(声音+弹窗) → 用户确认 → 券商APP下单 → 回来记录
```

### 提醒机制

| 触发条件 | 提醒方式 |
|----------|----------|
| 价格触及买入价 | 声音+弹窗+震动 |
| 验证条件满足 | 强化提醒(可配置) |
| 止损预警(-5%) | 强提醒 |
| 触及止损价 | 强提醒+自动记录 |

### 成交回填

- 手动录入：价格、数量、时间
- 可选：对接券商API自动同步（后续版本）

---

## 四、计划 vs 实际跟踪

### 核心指标：计划完成率

```
计划完成率 = 实际执行笔数 / 计划笔数
```

### 计划状态定义

| 状态 | 含义 |
|------|------|
| **待执行** | 计划已制定，等待触发 |
| **已执行** | 按计划买入 |
| **放弃** | 手动放弃（如验证条件未满足） |
| **过期** | 时段过了未执行 |
| **部分执行** | 计划买多只，只买了其中几只 |

### 计划完成率分析

- 计划买3只，实际买1只 → 完成率33%
- 反映：**计划合理性** vs **执行力**

### 决策调整

| 完成率 | 问题诊断 | 调整方向 |
|--------|----------|----------|
| <30% | 计划过于激进/条件太严 | 放宽条件或减少计划数 |
| >80% | 计划偏保守 | 可以增加计划数 |
| 波动大 | 情绪化交易 | 严格按计划执行 |

---

## 五、交易记录

### 记录什么？

| 字段 | 说明 |
|------|------|
| 日期 | 交易日期 |
| 代码 | 股票代码 |
| 名称 | 股票名称 |
| 方向 | 买入/卖出 |
| 价格 | 成交价格 |
| 数量 | 成交数量 |
| 手续费 | 手续费+印花税 |
| 备注 | 计划执行/止盈/止损/放弃 |
| 关联计划 | 对应的交易计划ID |

### 记录用途

- 统计胜率、盈亏比
- 分析买卖点是否合理
- 复盘计划完成情况

---

## 六、完整闭环

```
┌─────────────────────────────────────────────────────────────┐
│  复盘(15:30)  →  制定计划  →  盘中监控  →  执行  →  记录  │
│      ↑                                              │      │
│      └────────────── 调整参数/策略  ←──────────────┘      │
└─────────────────────────────────────────────────────────────┘

闭环指标:
- 计划完成率 (目标>60%)
- 胜率 (目标>50%)
- 盈亏比 (目标>1.5)
- 日均交易笔数
```

---

## 七、页面功能映射

基于上述工作流，MVP需要的核心页面：

| 优先级 | 页面 | 核心功能 |
|--------|------|----------|
| P0 | **复盘** | 涨停板列表、板块热度、情绪指标、生成目标股池 |
| P0 | **交易计划** | 制定计划、计划列表、状态管理 |
| P0 | **监控** | 价格监控、提醒推送、手动回填 |
| P0 | **交易记录** | 记录成交、统计分析 |
| P1 | **持仓** | 当前持仓、盈亏、卖出提醒 |
| P2 | 目标股池 | 从复盘导入的候选股 |
| P2 | 配置 | 策略参数、风控设置 |

> Dashboard 暂不着急（盘中主要在监控页面）

---

## 八、数据模型核心

### 交易计划

```
TradePlan {
  id
  stock_code
  stock_name
  mode: [低吸, 半路, 打板]
  target_price
  position_pct
  stop_loss_price
  take_profit_1
  take_profit_2
  validation_conditions  // JSON: {open_pct<3, volume>1.5亿}
  valid_time_start      // 时段开始
  valid_time_end        // 时段结束
  reason                // 买入理由
  status: [待执行, 已执行, 放弃, 过期]
  plan_date             // 计划日期
  created_at
}
```

### 交易记录

```
TradeRecord {
  id
  trade_plan_id         // 关联计划(可为null)
  stock_code
  stock_name
  direction: [买入, 卖出]
  price
  quantity
  fee
  note                  // 备注: 计划执行/止盈1/止盈2/止损
  executed_at
}
```

### 复盘输出

```
DailyReview {
  id
  review_date
 涨停板列表: [{code, name, reason, sector}]
  炸板列表: [{code, name, reason}]
  情绪周期: [冰点/回暖/高潮/分歧]
  热门板块: [sector1, sector2]
  明日策略: {仓位建议, 关注方向}
}
```
