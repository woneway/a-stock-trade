# 目标股池管理 - 规范

## ADDED Requirements

### Requirement: 每日策略扫描

系统应支持每日收盘后自动扫描全市场股票，按策略筛选出目标股池。

#### Scenario: 收盘后执行策略扫描

- **WHEN** 用户触发"每日选股"操作，或达到15:30收盘时间
- **THEN** 系统扫描沪深京A股全市场（约5500只股票）
- **AND** 按策略条件筛选出5-10只目标股
- **AND** 按置信度从高到低排序
- **AND** 每只股票包含：股票代码、名称、策略名称、信号理由、建议价格、置信度

#### Scenario: 目标股状态管理

- **WHEN** 用户查看目标股列表
- **THEN** 显示所有目标股及其状态（待买入/已买入/已卖出/已放弃）
- **AND** 用户可以手动修改目标股状态

### Requirement: 计划价格管理

系统应支持用户为每只目标股设定计划买入价和仓位比例。

#### Scenario: 设定计划价格

- **WHEN** 用户为目标股设定计划买入价和仓位比例
- **THEN** 系统保存计划价格和仓位比例
- **AND** 后续监控时使用计划价格作为触发条件

### Requirement: 涨跌幅监控

系统应支持在交易时段实时监控目标股的涨跌幅，到达计划价格时提醒用户。

#### Scenario: 触发买入提醒

- **WHEN** 监控周期内，目标股当前价格 <= 计划买入价
- **THEN** 系统发出桌面通知提醒用户
- **AND** 提醒内容包含：股票代码、名称、当前价格、计划买入价

---

## 第一阶段策略列表

| 策略名称 | 类型 | 触发条件 |
|----------|------|----------|
| emotion-cycle-ice | 情绪周期 | 市场涨停数<30，寻找逆势抗跌股 |
| kdj-golden-cross | 技术指标 | 日线KDJ金叉且K<30 |
| first-board | 涨停板 | 首次涨停且成交量放大 |
| leader-pullback | 动量 | 板块龙头回调至5日线企稳 |

---

## 数据模型

### target_pool 表

| 字段 | 类型 | 说明 |
|------|------|------|
| id | INTEGER | 主键 |
| stock_code | VARCHAR(10) | 股票代码 |
| stock_name | VARCHAR(50) | 股票名称 |
| strategy | VARCHAR(50) | 策略名称 |
| reason | TEXT | 信号理由 |
| planned_price | DECIMAL(10,2) | 计划买入价 |
| planned_ratio | DECIMAL(5,2) | 计划仓位比例 |
| status | VARCHAR(20) | 状态：待买入/已买入/已卖出/已放弃 |
| scan_date | DATE | 扫描日期 |
| created_at | DATETIME | 创建时间 |
